<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Convert</title>
   <script>
      function dodrop(event)
{
  var dt = event.dataTransfer;
  var files = dt.files;
  console.log(files);
  
    for (var i = 0; i < files.length; i++) {
      reader = new FileReader();
      reader.onload = function (event) {
        
        const input = event.target.result;
        console.log(input);
        let result = input.split('\n').map(s => JSON.parse(s));
        console.log(result);
        const items = result.items
        const replacer = (key, value) => value === null ? '' : value // specify how you want to handle null values here
        const header = Object.keys(items[0])
        const csv = [
          header.join(','), // header row first
          ...items.map(row => header.map(fieldName => JSON.stringify(row[fieldName], replacer)).join(','))
        ].join('\n')
        console.log(csv)
      };
      reader.readAsText(files[i]);
      
    }
}
   </script>
</head>
<body>

<div id="output" style="min-height: 200px; white-space: pre; border: 1px solid black;"
     ondragenter="document.getElementById('output').textContent = ''; event.stopPropagation(); event.preventDefault();"
     ondragover="event.stopPropagation(); event.preventDefault();"
     ondrop="event.stopPropagation(); event.preventDefault();
     dodrop(event);">
     DROP FILES HERE FROM FINDER OR EXPLORER
</div>



</body>
</html>
